<!doctype html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kikyo Settings</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <div class="sidebar">
    <div class="sidebar-header">設定</div>
    <ul class="sidebar-nav">
      <li class="nav-item active" data-target="section-array">配列</li>
      <li class="nav-item" data-target="section-thumb">親指シフト</li>
      <li class="nav-item" data-target="section-chord">文字キー同時打鍵シフト</li>
      <li class="nav-item" data-target="section-behavior">動作モード</li>
      <li class="nav-item" data-target="section-about">桔梗について</li>
    </ul>
  </div>

  <div class="main-content">
    <div class="header-bar">
      <h1>設定</h1>
      <div class="header-actions">
        <label class="toggle-switch">
          <input type="checkbox" id="global-enabled" checked>
          <span class="slider"></span>
        </label>
        <span style="margin-left: 10px; font-size: 0.9em;">有効</span>
      </div>
    </div>

    <!-- 配列セクション -->
    <div id="section-array" class="settings-section active">
      <h2>配列</h2>

      <div class="setting-item">
        <div class="setting-label">配列定義ファイル</div>
        <div class="setting-control row">
          <input type="text" id="layout-path" placeholder="C:\path\to\layout.yab" />
          <button id="browse-layout-btn" style="margin-left: 5px;">参照...</button>
          <button id="load-layout-btn">読み込み</button>
        </div>
        <div class="setting-desc">使用する配列定義ファイル（.yab / .bnz）のパスを指定します。</div>
      </div>



      <div class="setting-group">
        <h3>文字キーのキーリピートを有効にする</h3>

        <div class="setting-item">
          <div class="setting-label">文字が割り当てられているキー</div>
          <div class="setting-control">
            <label class="toggle-switch">
              <input type="checkbox" id="char-repeat-assigned">
              <span class="slider"></span>
            </label>
          </div>
        </div>

        <div class="setting-item">
          <div class="setting-label">文字が割り当てられていないキー</div>
          <div class="setting-control">
            <label class="toggle-switch">
              <input type="checkbox" id="char-repeat-unassigned">
              <span class="slider"></span>
            </label>
          </div>
        </div>
      </div>
    </div>

    <!-- 親指シフトセクション -->
    <div id="section-thumb" class="settings-section">
      <h2>親指シフト</h2>

      <div class="thumb-columns" style="display: flex; gap: 20px;">
        <!-- 左親指 -->
        <div class="thumb-col" style="flex: 1;">
          <h3>左親指</h3>

          <div class="setting-item">
            <div class="setting-label">左親指シフトキー</div>
            <div class="setting-control">
              <select id="thumb-left-key">
                <option value="None">なし</option>
                <option value="Esc">Esc</option>
                <option value="Tab">Tab</option>
                <option value="Muhenkan">無変換</option>
                <option value="Space">Space</option>
                <option value="Henkan">変換</option>
                <option value="Enter">Enter</option>
                <option value="BackSpace">BackSpace</option>
                <option value="Delete">Delete</option>
                <option value="Insert">Insert</option>
                <option value="Up">上</option>
                <option value="Left">左</option>
                <option value="Right">右</option>
                <option value="Down">下</option>
                <option value="Home">Home</option>
                <option value="End">End</option>
                <option value="PageUp">PageUp</option>
                <option value="PageDown">PageDown</option>
                <option value="LeftShift">左Shift</option>
                <option value="RightShift">右Shift</option>
                <option value="LeftCtrl">左Ctrl</option>
                <option value="RightCtrl">右Ctrl</option>
              </select>
            </div>
          </div>

          <div class="setting-item">
            <div class="setting-label">連続シフト</div>
            <div class="setting-control">
              <label class="toggle-switch">
                <input type="checkbox" id="thumb-left-continuous">
                <span class="slider"></span>
              </label>
            </div>
          </div>

          <div class="setting-item">
            <div class="setting-label">単独打鍵</div>
            <div class="setting-control">
              <select id="thumb-left-single-press">
                <option value="None">無効</option>
                <option value="Enable">有効</option>
                <option value="PrefixShift">前置シフト</option>
                <option value="SpaceKey">Spaceキー</option>
              </select>
            </div>
          </div>

          <div class="setting-item">
            <div class="setting-label" id="thumb-left-repeat-label">親指シフトキーリピート</div>
            <div class="setting-control">
              <label class="toggle-switch">
                <input type="checkbox" id="thumb-left-repeat">
                <span class="slider"></span>
              </label>
            </div>
          </div>
        </div>

        <!-- 右親指 -->
        <div class="thumb-col" style="flex: 1;">
          <h3>右親指</h3>

          <div class="setting-item">
            <div class="setting-label">右親指シフトキー</div>
            <div class="setting-control">
              <select id="thumb-right-key">
                <option value="None">なし</option>
                <option value="Esc">Esc</option>
                <option value="Tab">Tab</option>
                <option value="Muhenkan">無変換</option>
                <option value="Space">Space</option>
                <option value="Henkan">変換</option>
                <option value="Enter">Enter</option>
                <option value="BackSpace">BackSpace</option>
                <option value="Delete">Delete</option>
                <option value="Insert">Insert</option>
                <option value="Up">上</option>
                <option value="Left">左</option>
                <option value="Right">右</option>
                <option value="Down">下</option>
                <option value="Home">Home</option>
                <option value="End">End</option>
                <option value="PageUp">PageUp</option>
                <option value="PageDown">PageDown</option>
                <option value="LeftShift">左Shift</option>
                <option value="RightShift">右Shift</option>
                <option value="LeftCtrl">左Ctrl</option>
                <option value="RightCtrl">右Ctrl</option>
              </select>
            </div>
          </div>

          <div class="setting-item">
            <div class="setting-label">連続シフト</div>
            <div class="setting-control">
              <label class="toggle-switch">
                <input type="checkbox" id="thumb-right-continuous">
                <span class="slider"></span>
              </label>
            </div>
          </div>

          <div class="setting-item">
            <div class="setting-label">単独打鍵</div>
            <div class="setting-control">
              <select id="thumb-right-single-press">
                <option value="None">無効</option>
                <option value="Enable">有効</option>
                <option value="PrefixShift">前置シフト</option>
                <option value="SpaceKey">Spaceキー</option>
              </select>
            </div>
          </div>

          <div class="setting-item">
            <div class="setting-label" id="thumb-right-repeat-label">親指シフトキーリピート</div>
            <div class="setting-control">
              <label class="toggle-switch">
                <input type="checkbox" id="thumb-right-repeat">
                <span class="slider"></span>
              </label>
            </div>
          </div>
        </div>
      </div>

      <div class="setting-item" style="margin-top: 20px;">
        <div class="setting-label">親指シフトが同時打鍵と判定される重なり割合</div>
        <div class="setting-control">
          <input type="range" id="thumb-overlap-ratio" min="0" max="100" class="range-slider">
          <span id="thumb-overlap-val" class="range-val">35%</span>
        </div>
      </div>

    </div>

    <!-- 文字キー同時打鍵シフトセクション -->
    <div id="section-chord" class="settings-section">
      <h2>文字キー同時打鍵シフト</h2>

      <div class="setting-item">
        <div class="setting-label">連続シフト</div>
        <div class="setting-control">
          <label class="toggle-switch">
            <input type="checkbox" id="char-continuous">
            <span class="slider"></span>
          </label>
        </div>
      </div>

      <div class="setting-item">
        <div class="setting-label">文字キー同志が同時打鍵と判定される重なり割合</div>
        <div class="setting-control">
          <input type="range" id="char-overlap-ratio" min="0" max="100" class="range-slider">
          <span id="char-overlap-val" class="range-val">35%</span>
        </div>
      </div>

    </div>

    <!-- 動作モードセクション -->
    <div id="section-behavior" class="settings-section">
      <h2>動作モード</h2>

      <div class="setting-item">
        <div class="setting-label">一時停止用のショートカットキー</div>
        <div class="setting-control">
          <select id="suspend-key">
            <option value="None">なし</option>
            <option value="ScrollLock">ScrollLock</option>
            <option value="Pause">Pause</option>
            <option value="Insert">Insert</option>
            <option value="RightShift">RightShift</option>
            <option value="RightControl">RightControl</option>
            <option value="RightAlt">RightAlt</option>
          </select>
        </div>
        <div class="setting-desc">押下すると一時停止・再開を切り替えます。</div>
      </div>

      <div class="setting-item">
        <div class="setting-label">IMEへのアクセス方法</div>
        <div class="setting-control">
          <select id="ime-mode">
            <option value="Auto">Auto (TSF -&gt; IMM)</option>
            <option value="Tsf">TSF</option>
            <option value="Imm">IMM</option>
            <option value="Ignore">Ignore (always on)</option>
          </select>
        </div>
        <div class="setting-desc">Controls when key replacement is active.</div>
      </div>
    </div>

    <!-- 桔梗についてセクション -->
    <div id="section-about" class="settings-section">
      <h2>桔梗について</h2>
      <div class="setting-item" style="text-align: center; margin-top: 40px;">
        <img src="assets/logo.png" alt="Kikyo" style="width: 107px; height: 107px; margin-bottom: 20px;">
        <h3 style="font-size: 24px; margin: 10px 0;">桔梗 -Kikyo-</h3>
        <p style="font-size: 14px; margin: 5px 0;">Version 0.1.0</p>
      </div>

      <div class="setting-item"
        style="text-align: center; margin-top: 40px; border-top: 1px solid #333; padding-top: 20px;">
        <p style="font-size: 0.9em; color: #888;">Emergency Stop: Ctrl + Alt + Esc</p>
        <p id="status-msg" style="margin-top: 10px; min-height: 20px;"></p>
      </div>
    </div>

    <script type="module" src="/main.js"></script>
</body>

</html>